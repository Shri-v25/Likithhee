<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAPPY BIRTHDAY LIKHITHEEE !!</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Great+Vibes&family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #c5a059;
            --deep-noir: #050505;
            --velvet: #1a0505;
            --glimmer: rgba(197, 160, 89, 0.4);
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--deep-noir);
            color: white;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        /* Cinematic Grain & Gradient */
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, var(--velvet) 0%, var(--deep-noir) 90%);
            pointer-events: none;
            z-index: 1;
        }

        /* Intro Screen */
        #intro {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            text-align: center;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .mickey-img {
            width: 300px;
            filter: drop-shadow(0 0 30px var(--glimmer));
            animation: float 4s ease-in-out infinite;
            margin-bottom: -20px;
        }

        h1 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(3rem, 10vw, 6rem);
            letter-spacing: 12px;
            margin: 0;
            color: var(--gold);
            text-shadow: 0 0 20px var(--glimmer);
            text-transform: uppercase;
        }

        .subtitle {
            font-family: 'Great Vibes', cursive;
            font-size: clamp(1.5rem, 5vw, 3rem);
            color: #fff;
            margin-top: -10px;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        .start-btn {
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 18px 60px;
            font-family: 'Bebas Neue';
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.5s;
            letter-spacing: 4px;
            position: relative;
            overflow: hidden;
        }

        .start-btn:hover {
            background: var(--gold);
            color: black;
            box-shadow: 0 0 40px var(--gold);
            transform: scale(1.05);
        }

        /* Puzzle Section */
        #game-wrap {
            display: none;
            position: relative;
            z-index: 2;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            animation: fadeIn 1.5s ease;
        }

        #puzzle-container {
            position: relative;
            width: 450px;
            height: 450px;
            border: 2px solid rgba(197, 160, 89, 0.1);
            background: rgba(255,255,255,0.01);
            box-shadow: 0 0 100px rgba(0,0,0,0.8);
        }

        .piece {
            position: absolute;
            cursor: grab;
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.7));
            transition: filter 0.3s;
        }

        .piece:active { cursor: grabbing; filter: brightness(1.2) drop-shadow(0 0 15px var(--gold)); }

        /* Final Message */
        #victory {
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            text-align: center;
            width: 100%;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(3deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .glitter {
            position: fixed;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            z-index: 5;
            animation: fall 3.5s linear infinite;
        }

        @keyframes fall {
            0% { transform: translateY(-10vh) translateX(0) scale(0); opacity: 1; }
            50% { opacity: 0.8; }
            100% { transform: translateY(110vh) translateX(50px) scale(1); opacity: 0; }
        }
    </style>
</head>
<body>

<div class="overlay"></div>

<div id="intro">
    <img src="mickey.png" alt="Mickey Birthday" class="mickey-img">
    <h1>HAPPY BIRTHDAY LIKHITHEEE !!</h1>
    <div class="subtitle">A special vibe for a legend...</div>
    <button class="start-btn" onclick="initGame()">UNWRAP THE VIBE</button>
</div>

<div id="game-wrap">
    <h2 style="font-family: 'Bebas Neue'; color: var(--gold); font-size: 2.5rem; letter-spacing: 5px;">Solve to Reveal</h2>
    <div id="puzzle-container"></div>
</div>

<div id="victory">
    <h1 style="font-size: clamp(4rem, 15vw, 10rem); line-height: 0.8; margin-bottom: 20px;">IT'S YOURS.</h1>
    <p class="subtitle" style="font-size: clamp(2rem, 6vw, 4rem);">Look next to you, Likhith...</p>
</div>

<script>
const rows = 3;
const cols = 3;
const size = 150; 
const tabSize = 32;
const imgUrl = 'gift.jpeg';

function initGame() {
    document.getElementById('intro').style.opacity = '0';
    setTimeout(() => {
        document.getElementById('intro').style.display = 'none';
        document.getElementById('game-wrap').style.display = 'flex';
        createPuzzle();
        startGlitters();
    }, 1200);
}

function createPuzzle() {
    const container = document.getElementById('puzzle-container');
    let edges = [];

    // Jigsaw Logic for Tabs
    for (let r = 0; r < rows; r++) {
        edges[r] = [];
        for (let c = 0; c < cols; c++) {
            edges[r][c] = { 
                top: (r === 0) ? 0 : -edges[r-1][c].bottom,
                left: (c === 0) ? 0 : -edges[r][c-1].right,
                bottom: (r === rows-1) ? 0 : (Math.random() > 0.5 ? 1 : -1),
                right: (c === cols-1) ? 0 : (Math.random() > 0.5 ? 1 : -1)
            };
        }
    }

    for (let r = 0; r < rows; r++) {
        for (let c = 0; c < cols; c++) {
            const piece = document.createElement('div');
            piece.className = 'piece';
            const path = createPiecePath(edges[r][c]);
            
            const svg = `
                <svg width="${size + tabSize*2}" height="${size + tabSize*2}" viewBox="-${tabSize} -${tabSize} ${size + tabSize*2} ${size + tabSize*2}">
                    <defs>
                        <clipPath id="clip${r}${c}">
                            <path d="${path}" />
                        </clipPath>
                    </defs>
                    <image xlink:href="${imgUrl}" 
                        x="-${c * size}" y="-${r * size}" 
                        width="${cols * size}" height="${rows * size}" 
                        clip-path="url(#clip${r}${c})" />
                </svg>
            `;
            
            piece.innerHTML = svg;
            
            // Randomly scatter pieces in the vicinity
            const scatterX = (Math.random() - 0.5) * 300;
            const scatterY = (Math.random() - 0.5) * 300;
            piece.style.left = (c * size + scatterX) + "px";
            piece.style.top = (r * size + scatterY) + "px";

            piece.dataset.correctX = c * size;
            piece.dataset.correctY = r * size;
            
            makeDraggable(piece);
            container.appendChild(piece);
        }
    }
}

function createPiecePath(e) {
    let p = `M 0 0`;
    p += horizontalEdge(0, 0, size, e.top, true);
    p += verticalEdge(size, 0, size, e.right, false);
    p += horizontalEdge(size, size, -size, e.bottom, false);
    p += verticalEdge(0, size, -size, e.left, true);
    return p + " Z";
}

function horizontalEdge(x, y, length, type, top) {
    let dir = length > 0 ? 1 : -1;
    let mid = x + length/2;
    if (type === 0) return ` L ${x+length} ${y}`;
    let curveDir = top ? -1 : 1;
    return ` L ${mid - dir*tabSize} ${y} C ${mid - dir*tabSize/2} ${y + curveDir*tabSize*type} ${mid + dir*tabSize/2} ${y + curveDir*tabSize*type} ${mid + dir*tabSize} ${y} L ${x+length} ${y}`;
}

function verticalEdge(x, y, length, type, left) {
    let dir = length > 0 ? 1 : -1;
    let mid = y + length/2;
    if (type === 0) return ` L ${x} ${y+length}`;
    let curveDir = left ? 1 : -1;
    return ` L ${x} ${mid - dir*tabSize} C ${x + curveDir*tabSize*type} ${mid - dir*tabSize/2} ${x + curveDir*tabSize*type} ${mid + dir*tabSize/2} ${x} ${mid + dir*tabSize} L ${x} ${y+length}`;
}

function makeDraggable(el) {
    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
    el.onpointerdown = (e) => {
        el.style.zIndex = "100";
        pos3 = e.clientX;
        pos4 = e.clientY;
        document.onpointermove = (e) => {
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            el.style.top = (el.offsetTop - pos2) + "px";
            el.style.left = (el.offsetLeft - pos1) + "px";
        };
        document.onpointerup = () => {
            document.onpointermove = null;
            checkSnap(el);
        };
    };
}

function checkSnap(el) {
    const curX = parseInt(el.style.left);
    const curY = parseInt(el.style.top);
    const tarX = parseInt(el.dataset.correctX);
    const tarY = parseInt(el.dataset.correctY);

    if (Math.abs(curX - tarX) < 25 && Math.abs(curY - tarY) < 25) {
        el.style.left = tarX + "px";
        el.style.top = tarY + "px";
        el.style.pointerEvents = 'none';
        el.style.zIndex = "1";
        el.style.filter = "none";
        checkWin();
    }
}

function checkWin() {
    const pieces = document.querySelectorAll('.piece');
    const locked = Array.from(pieces).filter(p => p.style.pointerEvents === 'none');
    if (locked.length === rows * cols) {
        setTimeout(() => {
            document.getElementById('game-wrap').style.transition = 'all 2s';
            document.getElementById('game-wrap').style.opacity = '0';
            document.getElementById('victory').style.display = 'block';
            document.getElementById('victory').style.animation = 'fadeIn 2s forwards';
        }, 500);
    }
}

function startGlitters() {
    setInterval(() => {
        const g = document.createElement('div');
        g.className = 'glitter';
        const s = Math.random() * 3 + 2 + 'px';
        g.style.width = s;
        g.style.height = s;
        g.style.left = Math.random() * 100 + 'vw';
        g.style.animationDuration = (Math.random() * 2 + 3) + 's';
        g.style.background = Math.random() > 0.4 ? 'var(--gold)' : '#fff';
        g.style.boxShadow = `0 0 10px ${g.style.background}`;
        document.body.appendChild(g);
        setTimeout(() => g.remove(), 4000);
    }, 100);
}
</script>

</body>
</html>
