<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAPPY BIRTHDAY LIKHITHEEE !!</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Great+Vibes&family=Montserrat:wght@300&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #c5a059;
            --dark-red: #2c0a0a;
            --bg: #0a0a0a;
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--bg);
            color: white;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        /* R&B Gradient Overlay */
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, rgba(44, 10, 10, 0.4) 0%, rgba(10, 10, 10, 1) 80%);
            pointer-events: none;
            z-index: 1;
        }

        /* Intro Screen */
        #intro {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            text-align: center;
            transition: opacity 1s ease;
        }

        .mickey-img {
            width: 280px;
            filter: drop-shadow(0 0 20px rgba(197, 160, 89, 0.3));
            animation: float 4s ease-in-out infinite;
        }

        h1 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 5rem;
            letter-spacing: 8px;
            margin: 10px 0;
            color: var(--gold);
            text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
        }

        .subtitle {
            font-family: 'Great Vibes', cursive;
            font-size: 2.5rem;
            color: #fff;
            margin-bottom: 30px;
        }

        .start-btn {
            background: none;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 15px 50px;
            font-family: 'Bebas Neue';
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.4s;
            letter-spacing: 2px;
        }

        .start-btn:hover {
            background: var(--gold);
            color: black;
            box-shadow: 0 0 30px var(--gold);
        }

        /* Puzzle Area */
        #game-wrap {
            display: none;
            position: relative;
            z-index: 2;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        #puzzle-container {
            position: relative;
            width: 450px;
            height: 450px;
            border: 1px solid #333;
            background: rgba(255,255,255,0.02);
        }

        .piece {
            position: absolute;
            cursor: grab;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.5));
        }

        .piece:active { cursor: grabbing; }

        /* Victory Message */
        #victory {
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            text-align: center;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }

        .glitter {
            position: fixed;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            z-index: 5;
            animation: fall 3s linear infinite;
        }

        @keyframes fall {
            0% { transform: translateY(-10vh) scale(0); opacity: 1; }
            100% { transform: translateY(100vh) scale(1); opacity: 0; }
        }
    </style>
</head>
<body>

<div class="overlay"></div>

<div id="intro">
    <img src="mickey.jpeg" alt="Mickey Birthday" class="mickey-img">
    <h1>HAPPY BIRTHDAY LIKHITHEEE !!</h1>
    <div class="subtitle">A special vibe for a legend...</div>
    <button class="start-btn" onclick="initGame()">UNWRAP THE VIBE</button>
</div>

<div id="game-wrap">
    <h2 style="font-family: 'Bebas Neue'; color: var(--gold); font-size: 2rem;">Solve to Reveal</h2>
    <div id="puzzle-container"></div>
</div>

<div id="victory">
    <h1 style="font-size: 6rem; line-height: 1;">IT'S YOURS.</h1>
    <p class="subtitle" style="font-size: 3rem;">Look next to you, Likhith...</p>
</div>

<script>
const rows = 3;
const cols = 3;
const size = 150; // Size of each piece
const tabSize = 30;
const imgUrl = 'gift.jpeg';

function initGame() {
    document.getElementById('intro').style.opacity = '0';
    setTimeout(() => {
        document.getElementById('intro').style.display = 'none';
        document.getElementById('game-wrap').style.display = 'flex';
        createPuzzle();
        startGlitters();
    }, 1000);
}

function createPuzzle() {
    const container = document.getElementById('puzzle-container');
    let edges = [];

    // Generate edge logic
    for (let r = 0; r < rows; r++) {
        edges[r] = [];
        for (let c = 0; c < cols; c++) {
            edges[r][c] = { 
                top: (r === 0) ? 0 : -edges[r-1][c].bottom,
                left: (c === 0) ? 0 : -edges[r][c-1].right,
                bottom: (r === rows-1) ? 0 : (Math.random() > 0.5 ? 1 : -1),
                right: (c === cols-1) ? 0 : (Math.random() > 0.5 ? 1 : -1)
            };
        }
    }

    for (let r = 0; r < rows; r++) {
        for (let c = 0; c < cols; c++) {
            const piece = document.createElement('div');
            piece.className = 'piece';
            
            // Generate the SVG Path
            const path = createPiecePath(edges[r][c]);
            
            // Piece Setup
            const svg = `
                <svg width="${size + tabSize*2}" height="${size + tabSize*2}" viewBox="-${tabSize} -${tabSize} ${size + tabSize*2} ${size + tabSize*2}">
                    <defs>
                        <clipPath id="clip${r}${c}">
                            <path d="${path}" />
                        </clipPath>
                    </defs>
                    <image xlink:href="${imgUrl}" 
                        x="-${c * size}" y="-${r * size}" 
                        width="${cols * size}" height="${rows * size}" 
                        clip-path="url(#clip${r}${c})" />
                </svg>
            `;
            
            piece.innerHTML = svg;
            
            // Random Scatter Position
            const startX = Math.random() * 200 - 100;
            const startY = Math.random() * 200 - 100;
            piece.style.left = (c * size + startX) + "px";
            piece.style.top = (r * size + startY) + "px";

            // Store correct position
            piece.dataset.correctX = c * size;
            piece.dataset.correctY = r * size;
            
            makeDraggable(piece);
            container.appendChild(piece);
        }
    }
}

function createPiecePath(e) {
    let p = `M 0 0`;
    // Top
    p += horizontalEdge(0, 0, size, e.top, true);
    // Right
    p += verticalEdge(size, 0, size, e.right, false);
    // Bottom
    p += horizontalEdge(size, size, -size, e.bottom, false);
    // Left
    p += verticalEdge(0, size, -size, e.left, true);
    return p + " Z";
}

function horizontalEdge(x, y, length, type, top) {
    let dir = length > 0 ? 1 : -1;
    let mid = x + length/2;
    if (type === 0) return ` L ${x+length} ${y}`;
    let curveDir = top ? -1 : 1;
    return ` L ${mid - dir*tabSize} ${y} C ${mid - dir*tabSize/2} ${y + curveDir*tabSize*type} ${mid + dir*tabSize/2} ${y + curveDir*tabSize*type} ${mid + dir*tabSize} ${y} L ${x+length} ${y}`;
}

function verticalEdge(x, y, length, type, left) {
    let dir = length > 0 ? 1 : -1;
    let mid = y + length/2;
    if (type === 0) return ` L ${x} ${y+length}`;
    let curveDir = left ? 1 : -1;
    return ` L ${x} ${mid - dir*tabSize} C ${x + curveDir*tabSize*type} ${mid - dir*tabSize/2} ${x + curveDir*tabSize*type} ${mid + dir*tabSize/2} ${x} ${mid + dir*tabSize} L ${x} ${y+length}`;
}

function makeDraggable(el) {
    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
    el.onpointerdown = (e) => {
        pos3 = e.clientX;
        pos4 = e.clientY;
        document.onpointermove = (e) => {
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            el.style.top = (el.offsetTop - pos2) + "px";
            el.style.left = (el.offsetLeft - pos1) + "px";
        };
        document.onpointerup = () => {
            document.onpointermove = null;
            checkSnap(el);
        };
    };
}

function checkSnap(el) {
    const curX = parseInt(el.style.left);
    const curY = parseInt(el.style.top);
    const tarX = parseInt(el.dataset.correctX);
    const tarY = parseInt(el.dataset.correctY);

    if (Math.abs(curX - tarX) < 20 && Math.abs(curY - tarY) < 20) {
        el.style.left = tarX + "px";
        el.style.top = tarY + "px";
        el.style.pointerEvents = 'none';
        el.style.zIndex = "1";
        checkWin();
    }
}

function checkWin() {
    const pieces = document.querySelectorAll('.piece');
    const locked = Array.from(pieces).filter(p => p.style.pointerEvents === 'none');
    if (locked.length === rows * cols) {
        document.getElementById('game-wrap').style.opacity = '0.3';
        document.getElementById('victory').style.display = 'block';
    }
}

function startGlitters() {
    setInterval(() => {
        const g = document.createElement('div');
        g.className = 'glitter';
        const size = Math.random() * 4 + 'px';
        g.style.width = size;
        g.style.height = size;
        g.style.left = Math.random() * 100 + 'vw';
        g.style.animationDuration = (Math.random() * 2 + 2) + 's';
        g.style.background = Math.random() > 0.5 ? 'var(--gold)' : 'white';
        document.body.appendChild(g);
        setTimeout(() => g.remove(), 4000);
    }, 150);
}
</script>

</body>
</html>
